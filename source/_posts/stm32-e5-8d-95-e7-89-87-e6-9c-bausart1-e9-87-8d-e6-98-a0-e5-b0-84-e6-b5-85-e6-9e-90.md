---
title: STM32单片机USART1重映射 浅析
tags:
  - GPIO
  - STM32
  - USART
  - 嵌入式
  - 重映射
url: 980.html
id: 980
comments: false
categories:
  - STM32
  - 单片机
  - 嵌入式
date: 2016-07-03 14:13:31
---

STM32的数据手册上有如下描述： ![usart1_remap](http://oarap.org/wp-content/uploads/2016/07/usart1_remap.jpg) 即当PA9、PA10被占用时，我们依然可以使用USART1，将其收发引脚对应到PB6、PB7上。   以下为USART.C中USART1_Config（串口1初始化配置函数）的内容。 

void USART1_Config(void)
{
        GPIO\_InitTypeDef GPIO\_InitStructure;
        USART\_InitTypeDef USART\_InitStructure; 

        /*----------------------------初始化各时钟各模块-----------------------------------------------*/
        RCC\_APB2PeriphClockCmd(RCC\_APB2Periph_USART1,ENABLE);                      //使能USART1模块
        RCC\_APB2PeriphClockCmd(RCC\_APB2Periph\_GPIOB | RCC\_APB2Periph_AFIO,ENABLE); //使能GPIOB的时钟和AFIO时钟
        GPIO\_PinRemapConfig(GPIO\_Remap_USART1,ENABLE);                             //使能USART1重映射功能
        
        /*--------------------------配置PB6和PB7的GPIO状态---------------------------------------------*/
        //TXD-PB6
        GPIO\_InitStructure.GPIO\_Pin = GPIO\_Pin\_6;
        GPIO\_InitStructure.GPIO\_Mode = GPIO\_Mode\_AF_PP;
        GPIO\_InitStructure.GPIO\_Speed = GPIO\_Speed\_50MHz;
        GPIO\_Init(GPIOB, &GPIO\_InitStructure);
        //RXD-PB7
        GPIO\_InitStructure.GPIO\_Pin = GPIO\_Pin\_7;
        GPIO\_InitStructure.GPIO\_Mode = GPIO\_Mode\_IN_FLOATING;
        GPIO\_Init(GPIOB, &GPIO\_InitStructure);
        //串口通讯参数设置
        USART\_InitStructure.USART\_BaudRate = 9600; //波特率
        USART\_InitStructure.USART\_WordLength = USART\_WordLength\_8b; //数据位8位
        USART\_InitStructure.USART\_StopBits = USART\_StopBits\_1; //停止位1位
        USART\_InitStructure.USART\_Parity = USART\_Parity\_No; //校验位 无
        USART\_InitStructure.USART\_HardwareFlowControl = USART\_HardwareFlowControl\_None;//无流控制
        USART\_InitStructure.USART\_Mode = USART\_Mode\_Rx | USART\_Mode\_Tx; //使能接收和发送引脚
        //将以上赋完值的结构体带入库函数USART_Init进行初始化
        USART\_Init(USART1, &USART\_InitStructure);
        USART\_ITConfig(USART1,USART\_IT_RXNE,ENABLE);//使能串口中断接收
        USART_Cmd(USART1, ENABLE);//开启USART1
}

* * *