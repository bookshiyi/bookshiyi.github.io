---
title: 多功能通用定时器
tags:
  - '555'
  - 74LS192
  - 多谐振荡器
  - 定时器
  - 数字电子
  - 数电
url: 168.html
id: 168
comments: false
categories:
  - 硬件设计
date: 2015-07-29 15:47:07
---

![多功能定时器任务书](http://oarap.org/wp-content/uploads/2016/02/多功能定时器任务书.png)

1\. 方案论证
--------

### 1.1 电源

        本系统采用了220V 50HZ交流电作为电源，这种设计使得电源随处可得，提高了系统的普遍适用性；

        若使用专用电源或电池供电则限制了系统的应用范围。

### 1.2 脉冲发生器

        常见的简易脉冲发生器主要有：压控振荡器件（VCO）、由数字编程器件（MCU、DSP、FPGA等）通过DAC输出脉冲信号以及由555定时器构成的多谐振荡器。

        压控振荡器大多由分立式元件构成，故占用体积较大，同时因为实际参数与理论参数的误差，会导致实际效果与仿真结果相差较大的情况；

        数字编程器件的参数计算相对简单，波形幅值和频率可调范围广，但是由于其价格相对昂贵，而且对工作环境要求较高，并不适用于本系统；

        由555定时器组成的脉冲发生器，通过简单的计算在加上外围电路后，无需编程和烧写程序，便能使芯片稳定工作在多谐振荡状态。

### 1.3 延时控制电路

        延时控制电路常见有：数字编程器件（MCU、DSP、FPGA等）、555定时器构成的单稳态电路、脉冲计数器构成的计时器；

        数字编程器件虽然设计相对简单，容易实现精准延时，但是采用这样的做法是对系统资源的浪费，提高了设计的成本；

        由555定时器构成的单稳态电路虽然结构单、性价比高，但是由于其定时时长有限，无法满足系统的最大延时时长，且因为实际电容的充放电效果并非理想状态，在长时间定时的时候精度严重下降,故放弃了这种方案；

        脉冲计数器74LS192通过脉冲触发计数，工作稳定，支持加记数、减计数和异步清零，便于设置初值，价格低廉，故本设计选用4片74LS192作为系统的延时控制电路。

### 1.4 控制执行电路

        由于后级有大功率（500W以上）的电器，而且还要进行前后级的强弱电隔离，无法用普通的三极管、光耦等器件简单连接，一来无法保证功率，另外无法彻底隔离前后级；所以采用三极管驱动继电器的方式控制大功率电器；

2\. 原理及技术指标
-----------

### 2.1 硬件框图

![多功能定时器原理图](http://oarap.org/wp-content/uploads/2016/02/多功能定时器原理图.png)

图2-1 系统硬件框图

### 2.2 设计原理

        通过555定时器构成多谐振荡器电路，产生周期为1min的矩形脉冲，将脉冲接在第一片74LS192上，系统上电后首先会通过复位电路自动复位到0状态，此时继电器处于断开状态，随后通过四个按键设置定时时长，按下双刀四掷开关，系统开始倒计时，第一片计数器计到十个脉冲的时候，会产生一个借位位脉冲，给下一片级联的74LS192，以此类推共四片，所以实现了最大9999min的定时设计，当时间倒计时回到0状态的时候继电器断开，后级的电器停止工作，完成本次定时控制；

        另外一片555定时器用作单稳态触发电路，用来控制循环定时，调整完滑动变阻器（根据电路计算1约对应1s），其控制原理是将单稳态电路的输出作为定时器时钟信号的选通信号，以此来达到延时开启并定时关闭的功能。

### 2.3 技术指标

        能够完成1-9999min的连续线性定时控制和循环定时控制（延时开启，定时关闭）功能，通过220vAC/10A的继电器可以满足控制功率500W的要求。

3\. 单元电路设计及参数计算
---------------

### 3.1 电源

        通过变压器降压后将10v 50HZ的交流电送入二极管桥进行全桥整流，整流后的经过大电容的滤波成为脉动的直流；为抑制后级大功率电器启动停止以及雷电等带来的共模干扰信号，在电容滤波后通过共模抑制电感抑制共模信号带来的电源污染；为使得电压波形更加平滑，在电源的中间级根据公式加入LC-型低通滤波电路，在保证电源功率的情况下稳定电压；为防止后级的因短路或过载等原因对前级电源造成损坏和污染，加入大功率二极管1N4148，单方向的隔离了前后级电源电路，抑制了后级对前级的干扰；为得到稳定的+5V直流电源，本设计采用性价比、稳定性和易用性较高的且十分成熟的LM7805芯片，避免了分立式元件构成的串联稳压电路结构复杂、调试难度大、不稳定等问题。

![图片2](http://oarap.org/wp-content/uploads/2016/02/图片2-2.png) 图3-1 电源电路

### 3.2 脉冲发生电路

        通过555定时器产生周期为1min的矩形脉冲作为单位脉冲，其计算公式为T=(Ra+2Rb)Cln2，故该系统的参数为：Ra=88.6Kr，Rb=100Kr，C=300uf。

![图片3](http://oarap.org/wp-content/uploads/2016/02/图片3-2.png)

图3-2 由555定时器构成的多谐振荡器

### 3.3 延时控制电路

        将每一片的74LS192的Q端引出，取反后送入两片八输入与非门，取反后送入单输入与非门，当74LS192的输出都为0的时候，最后一个与非门输出低电平，通过控制射极跟随器使得继电器关闭。

![图片4](http://oarap.org/wp-content/uploads/2016/02/图片4-2.png)

图3-3 延时控制电路

### 3.4 控制执行电路

        此处三极管作为电子开关使用，当信号为低电平的时候三极管工作在截止区，继电器断开，用电器停止工作；当前级信号为高电平的时候三极管工作在饱和区，Ic最大，此时继电器吸和，用电器工作。

![图片5](http://oarap.org/wp-content/uploads/2016/02/图片5-2.png)

图3-4 控制执行电路

### 3.5 单稳态触发器电路

        在本设计中，单稳态触发器用于控制延时启动，其原理是将单稳态触发器的输出端作为计数器的选通信号，当S7被按下后，电路进入暂态，经过Tw的时间后，计数器时钟信号选通，计数器开始工作，从而控制计数器的延时启动工作时间。脉冲宽度时间的计算公式Tw=1.1RC，(经计算1约对应1s)。

![图片6](http://oarap.org/wp-content/uploads/2016/02/图片6-2.png)

图3-5 单稳态触发器电路

4\. 仿真
------

        为更好的得到仿真波形图，本设计缩短了脉冲周期，展示本设计延时启动5s定时控制20min。在示波器中可以发现，当单稳态电路输出为暂稳态时，计数器不工作，当输出为稳态时，计数器开始工作，当计数器十个脉冲来临后，继电器关闭，并且计数器停止运行（信号锁住）。

![图片7](http://oarap.org/wp-content/uploads/2016/02/图片7-2.png) 图4-1 仿真波形图 ![图片8](http://oarap.org/wp-content/uploads/2016/02/图片8-2.png) 图4-2 系统仿真图

5\. 设计小结
--------

        通过此次课程设计，加深了对电源电路和计数器以及门电路的认识，在设计的刚开始总是看不到波形，后来通过设置仿真步长解决了这个问题，后来曾有一段时间思路错误，试图用八片74LS160、十六片同或门、十六个非门、八位数码管来构成，才发现这种做法十分不可取，不仅电路体积大而且成本昂贵，后来改用了支持减计数模式的74LS192芯片，纠正了思路，近一个星期的课程设计让我更加相信“工程无小事，事出必有因”这句话，每一次出现的问题只要静下心来认真查找错误和积极的通过搜索引擎搜索问题基本没有解决不了的问题，同时还发现，头脑清醒是做好课程设计的根本要素，充足的睡眠和良好的饮食是十分必要的。

6\. 参考文献
--------

\[1\]童诗白，华成英.模拟电子技术基础\[M\].第四版.高等教育出版社.2006,5. \[2\]阎石.数字电子技术基础\[M\].第5版.北京：高等教育出版社.2006.5 \[3\].邱关源.电路\[M\].第五版.高等教育出版社.2006,5. \[4\]方大千，鲍俏伟.实用电子控制电路\[M\].北京：国防工业出版社.2003 \[5\]卢结成，高世忻，陈力生，田红民.电子电路实验及应用课题设计\[M\]合肥：中国科学技术大学出版社.2002 \[6\]高吉祥.电子技术基础实验与课程设计\[M\]第2版.北京：电子工业出版社.2005.2

Multisim仿真下载：[多功能定时器.rar](http://oarap.org/wp-content/uploads/2016/02/多功能定时器-.rar)